{% extends 'base.html' %}
{% load staticfiles %}
            
{% block main_content %}

<div id="upcoming-wrapper">

    <div class="col">
        <h1>2013-14 season</h1>
        
        <table>
            <tr class="concert">
                {% for concert in concerts %}
                <td class="fixed-width">
                    <a href="#{{ concert.pk }}">
                        <img src="{{ concert.image.image.url }}" alt="{{ concert.image.title }}" />
                    </a>
                </td>
                <td>
                    <a href="#{{ concert.pk }}"><h4>{{ concert.date }}</h4>{{ concert.title }}</a>
                </td>
                {% endfor %}
            </tr>
        </table>

    </div>

    <div class="col" id="upcoming-detail" style="display:none"></div>
    
</div>

{% endblock main_content %}

{% block additional_js %}
<script>

$(function(){

  // Bind the event.
  $(window).hashchange( function() {
    $( "#upcoming-detail" ).hide()
    hash = location.hash.replace( /^#/, '' ) || 'blank'
    if (hash != 'blank') {
        $( "#upcoming-detail" ).load( "/upcoming/" + hash + "/", function() {
            $( "#upcoming-detail" ).slideDown()
        })
    }
  })

  // Trigger the event (useful on page load).
  $(window).hashchange();
});
        
</script>
{% endblock %}